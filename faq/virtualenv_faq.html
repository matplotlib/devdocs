<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with Matplotlib in Virtual environments &mdash; Matplotlib 2.0.0b1.post1110+gf8ea2c5 documentation</title>
    
    <link rel="stylesheet" href="../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css"
type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0b1.post1110+gf8ea2c5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 2.0.0b1.post1110+gf8ea2c5 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Matplotlib 2.0.0b1.post1110+gf8ea2c5 documentation" href="../index.html" />
    <link rel="up" title="The Matplotlib FAQ" href="index.html" />
    <link rel="next" title="External Resources" href="../resources/index.html" />
    <link rel="prev" title="Environment Variables" href="environment_variables_faq.html" /> 


  </head>
  <body>



<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo2.svg" width="540px" border="0" alt="matplotlib"/></a>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../resources/index.html" title="External Resources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="environment_variables_faq.html" title="Environment Variables"
             accesskey="P">previous</a> |</li>

        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">The Matplotlib FAQ</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://depsy.org/package/python/matplotlib">
  <img src="http://depsy.org/api/package/pypi/matplotlib/badge.svg">
</a>

<br/>

Travis-CI: <a href="https://travis-ci.org/matplotlib/matplotlib">
  <img src="https://travis-ci.org/matplotlib/matplotlib.svg?branch=master"/>
</a>
<br/>
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Working with Matplotlib in Virtual environments</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#gui-frameworks">GUI Frameworks</a></li>
<li><a class="reference internal" href="#osx">OSX</a><ul>
<li><a class="reference internal" href="#pythonhome-script"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script</a></li>
<li><a class="reference internal" href="#pythonhome-function"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function</a></li>
<li><a class="reference internal" href="#pythonw-compiler">PythonW Compiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents.html">Documentation overview</a><ul>
  <li><a href="index.html">The Matplotlib FAQ</a><ul>
      <li>Previous: <a href="environment_variables_faq.html" title="previous chapter">Environment Variables</a></li>
      <li>Next: <a href="../resources/index.html" title="next chapter">External Resources</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/faq/virtualenv_faq.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="working-with-matplotlib-in-virtual-environments">
<span id="virtualenv-faq"></span><h1>Working with Matplotlib in Virtual environments<a class="headerlink" href="#working-with-matplotlib-in-virtual-environments" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#working-with-matplotlib-in-virtual-environments" id="id2">Working with Matplotlib in Virtual environments</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#gui-frameworks" id="id4">GUI Frameworks</a></li>
<li><a class="reference internal" href="#osx" id="id5">OSX</a><ul>
<li><a class="reference internal" href="#pythonhome-script" id="id6"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script</a></li>
<li><a class="reference internal" href="#pythonhome-function" id="id7"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function</a></li>
<li><a class="reference internal" href="#pythonw-compiler" id="id8">PythonW Compiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="id1"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>When running <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> in a
<a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtual environment</a> you may discover
a few issues. <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> itself has no issue with virtual environments.
However, the GUI frameworks that <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> uses for interactive
figures have some issues with virtual environments. Everything below assumes
some familiarity with the Matplotlib backends as found in <a class="reference internal" href="usage_faq.html#what-is-a-backend"><span class="std std-ref">What is a
backend?</span></a>.</p>
<p>If you only use the <code class="docutils literal"><span class="pre">IPython/Jupyter</span> <span class="pre">Notebook</span></code>&#8216;s <code class="docutils literal"><span class="pre">inline</span></code> and <code class="docutils literal"><span class="pre">notebook</span></code>
backends and non interactive backends you should not have any issues and can
ignore everything below.</p>
</div>
<div class="section" id="gui-frameworks">
<h2>GUI Frameworks<a class="headerlink" href="#gui-frameworks" title="Permalink to this headline">¶</a></h2>
<p>Interactive Matplotlib relies heavily on the interaction with external GUI
frameworks.</p>
<p>Most GUI frameworks are not pip installable. This makes it tricky to install
them within a virtual environment. This problem does not exist if you use Conda
environments where you can install all Conda supported GUI frameworks directly
into the environment. In regular virtualenv environment various workarounds
exist. Some of these are given here:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">TKAgg</span></code> backend doesn&#8217;t require any external dependencies and is
normally always available.</li>
<li>The <code class="docutils literal"><span class="pre">QT4</span></code> framework <code class="docutils literal"><span class="pre">PySide</span></code> is pip installable.</li>
<li>The upcoming <a class="reference external" href="http://wiki.wxpython.org/ProjectPhoenix">WX Phoenix</a> toolkit
is <code class="docutils literal"><span class="pre">pip</span></code> installable.</li>
</ul>
<p>Other frameworks are harder to install into a virtual environment. There are at
least two possible ways to get access to these in a virtual environment.</p>
<p>One often suggested solution is to use the <code class="docutils literal"><span class="pre">--system-site-packages</span></code> option
to virtualenv when creating an environment. This adds all system wide packages
to the virtual environment. However, this breaks the isolation between the
virtual environment and the system install. Among other issues it results in
hard to debug problems with system packages shadowing the environment packages.
If you use <a class="reference external" href="https://virtualenvwrapper.readthedocs.org/">virtualenvwrapper</a>
this can be toggled with the <code class="docutils literal"><span class="pre">toggleglobalsitepackages</span></code> command.</p>
<p>Alternatively, you can manually symlink the GUI frameworks into the environment.
I.e. to use PyQt5, you should symlink <code class="docutils literal"><span class="pre">PyQt5</span></code> and <code class="docutils literal"><span class="pre">sip</span></code> from your system
site packages directory into the environment taking care that the environment
and the systemwide install use the same python version.</p>
</div>
<div class="section" id="osx">
<h2>OSX<a class="headerlink" href="#osx" title="Permalink to this headline">¶</a></h2>
<p>On OSX, two different types of Python Builds exist: a regular build and a
framework build. In order to interact correctly with OSX through some
GUI frameworks you need a framework build of Python.
At the time of writing the <code class="docutils literal"><span class="pre">macosx</span></code>, <code class="docutils literal"><span class="pre">WX</span></code> and <code class="docutils literal"><span class="pre">WXAgg</span></code> backends require a
framework build to function correctly. Unfortunately virtualenv creates a non
framework build even if created from a framework build of Python. Conda
environments are framework builds. From
Matplotlib 1.5 onwards the <code class="docutils literal"><span class="pre">macosx</span></code> backend checks that a framework build is
available and fails if a non framework build is found.
WX has a similar check build in.</p>
<p>The issue has been reported on the virtualenv bug tracker <a class="reference external" href="https://github.com/pypa/virtualenv/issues/54">here</a> and <a class="reference external" href="https://github.com/pypa/virtualenv/issues/609">here</a></p>
<p>Until this is fixed, one of the following workarounds must be used:</p>
<div class="section" id="pythonhome-script">
<h3><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script<a class="headerlink" href="#pythonhome-script" title="Permalink to this headline">¶</a></h3>
<p>The best known workaround,
borrowed  from the <a class="reference external" href="http://wiki.wxpython.org/wxPythonVirtualenvOnMac">WX wiki</a>, is to  use the non
virtualenv python along with the PYTHONHOME environment variable.  This can be
implemented in a script as below. To use this modify <code class="docutils literal"><span class="pre">PYVER</span></code> and
<code class="docutils literal"><span class="pre">PATHTOPYTHON</span></code> and put the script in the virtualenv bin directory i.e.
<code class="docutils literal"><span class="pre">PATHTOVENV/bin/frameworkpython</span></code></p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>#!/bin/bash

# what real Python executable to use
PYVER=2.7
PATHTOPYTHON=/usr/local/bin/
PYTHON=${PATHTOPYTHON}python${PYVER}

# find the root of the virtualenv, it should be the parent of the dir this script is in
ENV=`$PYTHON -c &quot;import os; print(os.path.abspath(os.path.join(os.path.dirname(\&quot;$0\&quot;), &#39;..&#39;)))&quot;`

# now run Python with the virtualenv set as Python&#39;s HOME
export PYTHONHOME=$ENV
exec $PYTHON &quot;$@&quot;
</pre></div>
</div>
<p>With this in place you can run <code class="docutils literal"><span class="pre">frameworkpython</span></code> to get an interactive
framework build within the virtualenv. To run a script you can do
<code class="docutils literal"><span class="pre">frameworkpython</span> <span class="pre">test.py</span></code> where <code class="docutils literal"><span class="pre">test.py</span></code> is a script that requires a
framework build. To run an interactive <code class="docutils literal"><span class="pre">IPython</span></code> session with the framework
build within the virtual environment you can do <code class="docutils literal"><span class="pre">frameworkpython</span> <span class="pre">-m</span> <span class="pre">IPython</span></code></p>
</div>
<div class="section" id="pythonhome-function">
<h3><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function<a class="headerlink" href="#pythonhome-function" title="Permalink to this headline">¶</a></h3>
<p>Alternatively you can define a function in your <code class="docutils literal"><span class="pre">.bashrc</span></code> using</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>function frameworkpython {
    if [[ ! -z &quot;$VIRTUAL_ENV&quot; ]]; then
        PYTHONHOME=$VIRTUAL_ENV /usr/local/bin/python &quot;$@&quot;
    else
        /usr/local/bin/python &quot;$@&quot;
    fi
}
</pre></div>
</div>
<p>This function can then be used in all of your virtualenvs without having to
fix every single one of them.</p>
</div>
<div class="section" id="pythonw-compiler">
<h3>PythonW Compiler<a class="headerlink" href="#pythonw-compiler" title="Permalink to this headline">¶</a></h3>
<p>In addition
<a class="reference external" href="https://github.com/gldnspud/virtualenv-pythonw-osx">virtualenv-pythonw-osx</a>
provides an alternative workaround which may be used to solve the issue.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2014 The matplotlib development team.
      Last updated on Jun 23, 2016.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
  <!--Flipcause Integration v3.0// Flipcause Integration Instructions:
Install the following code block once in the website Header (after <head> tag) -->

<style>

.fc-black_overlay{
display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
}

.fc-white_content {
opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
}

.fc-main-box{
opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
}

.fc-widget_close{
opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
}

.floating_button{
display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
position:fixed; z-index:999999; overflow: auto;
}

@keyframes backfadesin {
   from { opacity:0; }
   to {opacity:.5;}
}

@-moz-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-webkit-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-o-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}


@-ms-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; transform: translateY(20px);}
   100% {opacity: 1; transform: translateY(0);}
}

@-moz-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -moz-transform: translateY(20px);}
   100% {opacity: 1; -moz-transform: translateY(0);}
}

@-webkit-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -webkit-transform: translateY(20px);}
   100% {opacity: 1; -webkit-transform: translateY(0);}
}

@-o-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -o-transform: translateY(20px);}
   100% {opacity: 1; -o-transform: translateY(0);}
}

@-ms-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -ms-transform: translateY(20px);}
   100% {opacity: 1; -ms-transform: translateY(0);}
}

</style>

<script>

function open_window(cause_id) {
var  protocol=String(document.location.protocol);
var new_url;
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
new_url="https://www.flipcause.com/widget/"+cause_id
window.open(new_url);
}

else {
document.getElementById("fc-fade").style.display = "block";
document.getElementById("fc-fade").style.webkitAnimation = "backfadesin 1s";
document.getElementById("fc-fade").style.animation = "backfadesin 1s";
document.getElementById("fc-fade").style.mozAnimation = "backfadesin 1s";
document.getElementById("fc-light").style.display = "block";
document.getElementById("fc-light").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-light").style.animation = "fadesin 1.5s";
document.getElementById("fc-light").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.display = "block";
document.getElementById("fc-main").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.animation = "fadesin 1.5s";
document.getElementById("fc-main").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.display = "block";
document.getElementById("fc-close").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.animation = "fadesin 1.5s";
document.getElementById("fc-close").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.display = "block";
document.getElementById("fc-myFrame").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.animation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").src="https://www.flipcause.com/widget/"+cause_id;
}
}


function close_window() {
document.getElementById("fc-fade").style.display="none";
document.getElementById("fc-light").style.display="none";
document.getElementById("fc-main").style.display="none";
document.getElementById("fc-close").style.display="none";
document.getElementById("fc-myFrame").style.display="none";
}

</script>

<div id="fc-fade" class="fc-black_overlay" onclick="close_window()"></div>
<div id="fc-light" class="fc-white_content">
<div id="fc-main" class="fc-main-box">
<div id="fc-close" class="fc-widget_close" onclick="close_window()">
</div><iframe id="fc-myFrame" iframe height="580" width="925" style="border: 0;
border-radius:5px 5px 5px 5px; box-shadow:0 0 8px rgba(0, 0, 0, 0.5);" scrolling="no" src=""></iframe></div>
</div>

<!--END Flipcause Main Integration Code-->
</footer>
</html>